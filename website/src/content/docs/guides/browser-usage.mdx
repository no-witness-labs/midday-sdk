---
title: Browser Usage
description: Using Midday SDK in browser environments with Lace wallet
---

import { Steps } from '@astrojs/starlight/components';

Midday SDK supports browser environments with integration for the [Lace wallet](https://www.lace.io/) extension.

## Prerequisites

- Lace wallet browser extension installed
- Lace wallet connected to Midnight testnet

## Connecting to Lace Wallet

<Steps>

1. **Connect to the wallet**

   ```typescript
   import * as Midday from '@no-witness-labs/midday-sdk';

   const connection = await Midday.BrowserWallet.connectWallet('testnet');
   ```

   This will prompt the user to approve the connection in their Lace wallet.

2. **Create a client from the connection**

   ```typescript
   const client = await Midday.Client.fromWallet(connection, {
     privateStateProvider: Midday.PrivateState.indexedDBPrivateStateProvider({
       privateStateStoreName: 'my-app'
     }),
   });
   ```

3. **Load a contract (zkConfig loaded per-contract)**

   ```typescript
   const contract = await client.loadContract({
     moduleUrl: 'https://cdn.example.com/contracts/counter/index.js',
     zkConfigBaseUrl: 'https://cdn.example.com/contracts/counter',
   });
   await contract.deploy();
   await contract.call('increment');
   ```

</Steps>

## Complete Example

```typescript
import * as Midday from '@no-witness-labs/midday-sdk';

async function main() {
  // Connect to Lace wallet
  const connection = await Midday.BrowserWallet.connectWallet('testnet');

  // Create client from wallet connection (no zkConfig at client level)
  const client = await Midday.Client.fromWallet(connection, {
    privateStateProvider: Midday.PrivateState.indexedDBPrivateStateProvider({
      privateStateStoreName: 'my-app'
    }),
  });

  // Load contract with zkConfig (each contract has its own zk circuits)
  const contract = await client.loadContract({
    moduleUrl: 'https://cdn.example.com/contracts/counter/index.js',
    zkConfigBaseUrl: 'https://cdn.example.com/contracts/counter',
  });

  // Deploy and interact
  await contract.deploy();
  await contract.call('increment');

  // Read state
  const state = await contract.ledgerState();
  console.log('Counter:', state.counter);
}
```

## Browser-Specific Considerations

### Private State Storage

In browsers, use IndexedDB for persistent private state:

```typescript
const privateStateProvider = Midday.PrivateState.indexedDBPrivateStateProvider({
  privateStateStoreName: 'my-app-private-state',
});
```

:::tip
Use a unique store name per application to avoid conflicts.
:::

### ZK Configuration

In browser environments, zkConfig is loaded per-contract from a URL:

```typescript
const contract = await client.loadContract({
  moduleUrl: 'https://cdn.example.com/contracts/counter/index.js',
  zkConfigBaseUrl: 'https://cdn.example.com/contracts/counter',
});
```

:::note
Ensure your ZK config server has proper CORS headers configured. The server should serve the contract's keys and zkir directories.
:::

### Network Selection

Match the network to the wallet's current network:

```typescript
// Connect to testnet
const connection = await Midday.BrowserWallet.connectWallet('testnet');

// Or connect to mainnet (when available)
const connection = await Midday.BrowserWallet.connectWallet('mainnet');
```

## Handling Wallet Events

The wallet connection provides events for state changes:

```typescript
const connection = await Midday.BrowserWallet.connectWallet('testnet');

// The connection includes the wallet state
console.log('Connected address:', connection.address);
console.log('Balance:', connection.balance);
```

## Troubleshooting

### Wallet Not Found

If `connectWallet` throws an error, ensure:

1. Lace wallet extension is installed
2. The wallet is unlocked
3. The user has allowed the site to connect

### Transaction Signing

All transactions are signed by the Lace wallet. The user will see a confirmation dialog for each transaction.

### CORS Issues

If ZK configs fail to load, check that your ZK config server includes:

```
Access-Control-Allow-Origin: *
```

Or configure it to allow your specific domain.
